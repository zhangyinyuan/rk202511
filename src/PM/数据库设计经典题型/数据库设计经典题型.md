# 数据库设计经典题型
## 2017年下半年 题目

【需求分析结果】
该系统的部分功能及初步需求分析的结果如下 ：
（1）M 公司旗下有业务部、策划部和其他部门。部门信息包括部门号、部门名、主管、联系电话和邮箱号；每个部门只有一名主管，只负责管理本部门的工作，且主管参照员工关系的员工号；一个部门有多名员工，每名员工属于且仅属于一个部门。
（2）员工信息包括员工号、姓名、职位、联系方式和薪资。职位包括主管、业务员、 策划员等。业务员负责受理用户申请，设置受理标志。一名业务员可以受理多个用户申请，但一个用户申请只能由一名业务员受理。
（3）用户信息包括用户号、用户名、银行账号、电话、联系地址。用户号唯一标识用户信息中的每一个元组。
（4） 用户申请信息包括申请号、用户号、会议日期、天数、参会人数、地点、预算和受理标志。申请号唯一标识用户申请信息中的每一个元组，且一个用户可以提交多个申请，但一个用户申请只对应一个用户号。
（5）策划部主管为已受理的用户申请制定会议策划任务。策划任务包括申请号、任务明细和要求完成时间。申请号唯一标识策划任务的每一个元组。一个策划任务只对应一个己受理的用户申请，但一个策划任务可由多名策划员参与执行，且一名策划员可以参与执行多项策划任务。
【概念模型设计】
根据需求阶段收集的信息，设计的实体联系图（不完整）如图 2-1 所示。

![f5806056e75845e7be70b72a94b2a17a_](../../../../work-record/src/img/f5806056e75845e7be70b72a94b2a17a_.png)

---

【关系模型设计】
 部门（部门号，部门名，部门主管，联系电话，邮箱号）
 员工（员工号，姓名，（a），联系方式，薪资）
 用户（用户名，（b），电话，联系地址）
 用户申请（申请号，用户号，会议日期，天数，参会人数，地点，受理标志，（c））
 策划任务（申请号，任务明细，（d）） 
 执行（申请号，策划员，实际完成时间，用户评价）

【问题1】（5分）
根据问题描述，补充五个联系，完善图2-1的实体联系图。联系名可用联系1、联系2、联系3、联系4和联系5，联系的类型为1:1、1:n和m:n（或1:1、1:*和*:*）。
【问题2】（4分）
根据题意，将关系模式中的空（a）~（d）补充完整，并填入答题纸对应的位置上。
【问题3】（4分）
给出“用户申请”和“策划任务”关系模式的主键和外键。
【问题4】（2分）
请问“执行”关系模式的主键为全码的说法正确吗？为什么？

---

---

## **答案与解析**

 - 试题难度：较难 - 知识点：数据库设计>数据库设计 - 试题答案：

【问题1】
1.联系1：部门和员工，1:n
2.联系2：业务员和用户申请，1:n
3.联系3：用户和用户申请，1:n
4.联系4：策划员和策划任务，n:m
5.联系5：策划任务和用户申请，1:1
或（联系5：部门和主管，1:1）
【问题2】
a.职位，部门号
b.用户号，银行账号
c.预算费用，业务员（员工号）
d.要求完成时间，主管号
【问题3】
用户申请：主键：申请号 外键：用户号，业务员
策划任务：主键：申请号 外键：申请号，主管号
【问题4】
不正确
All-key关系模型的所有属性组成该关系模式的候选码，称为全码。即所有属性当作一个码。若关系中只有一个候选码，且这个候选码中包含全部属性，则该候选码为全码。
实际完成时间和用户评价为非主属性。

---

## 归纳总结：

1. 关系模式填空，两部分组成
   1. 题目给出的属性
   2. 联系，将1方的主键加入到*方
2. 题目要求给5个联系，就一定要给出5个， 不要只给4个

**重在检查，防止漏掉属性**